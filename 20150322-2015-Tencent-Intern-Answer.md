# 2015年腾讯实习生在线笔试题答案
## 不定项选择题
1\. 关于图的存储结构，下列说法不正确的是（）。**BCD**  
A. 所谓**映像**，就是数据结构在计算机中的表示（映像=物理结构=存储结构）。数据元素之间的关系在计算机中有两种方法：**顺序映像**和**非顺序映像**；对应两种存储结构：`顺序存储结构`和`链式存储结构`。顺序映像的特点是借助元素在存储器中的相对位置来表示元素之间的逻辑关系，非顺序映像的特点是借助元素的指针表示元素之间的逻辑关系。因此图显然没有顺序映像的存储结构。A错。  
B. 图有两种存储结构，一种是**邻接矩阵**，另一种是**邻接表**。其中邻接矩阵是用一个一维数组表示顶点信息，一个二维数组表示边的信息。邻接表是用一个一维数组（或者链表）表示顶点信息，每个顶点拖一个链表表示边的信息。因此图的存储结构可以用数组来表示。B对。  
C. 图的存储结构有两种进阶版：**十字链表**和**邻接多重链表**。分别是针对有向图（十字链表）和无向图（邻接多重链表）的优化。十字链表就是邻接表和逆邻接表的叠加，有助于方便计算入度和出度。邻接多重链表和十字链表相似（只是边表存放的是一条边，而不是n个顶点的序列），方便无向图的删除和修改。这两个都属于多重链表，因此在实际应用中适宜采用多重链表来表示图的存储结构。C对。  
D. C选项中已经分析，**邻接多重链表**是针对**无向图**的优化。D对。  

2\. 下面哪些按钮标签能够让用户点击后直接提交表单？（）**A. \<input type="submit" />**  
答： html基础知识 \<input type="submit" />能够在用户点击后直接提交表单。   

3\. 请问下面代码的输出是什么？（）  **CBA**  
答：对象析构时，执行顺序和构造时相反。**所有成员变量在执行构造函数前就已经被构造**，所以反过来，析构的时候，成员变量在析构函数后面执行。

4\. 关于动态库和静态库，以下说法正确的是（）。**ABCD**  
答：有关动态链接库和静态链接库的知识点：区分三个名词**动态链接库**、**静态链接库**、**导入库**。  
软件链接的两种主要方式为：**动态链接**和**静态链接**。动态链接可能涉及到两种文件：导入库lib（如果有的话）和动态链接库dll。其中链接的时候只需要导入库lib（如果有的话），引入库lib（如果有的话）包含被dll导出的函数和变量的符号名，dll包含实际的函数和数据；运行的时候只需要exe和dll，将函数加载到内存中。静态链接只涉及静态链接库lib，里面包含了所有需要的函数和变量，运行的时候，只需要exe。  
显然，A对，B对，C对，D对。  

5\. 关于malloc和new，以下说法正确的是（）。**ABCD**   
答： 有关new和malloc的区别的问题。  
1. malloc与free是**C++/C语言的标准库函数**，new/delete是**C++的运算符**。由于malloc/free是库函数而不是运算符，不在编译器控制权限之内，不能够把执行构造函数和析构函数的任务强加malloc/free。  
2. new**自动计算**需要分配的空间，而malloc需要**手工计算**字节数。  
3. new申请的内存会**比实际对象大**，为了存储**cookie**。比如对象大小是objectSize,则事实上申请objectSize+cookie，这个cookie结构存放的信息包括对象大小，对象前后会包含两个用于检测内存溢出的变量，所有new申请的cookie块会链接成双向链表。  
显然，A对，B对，C对，D对。  

6\. 若数据元素序列10，11，12，5，6，7，20，2，3是采用下列排序方法之一得到的第二趟排序后的结果，则该排序算法只能是（）。**D. 插入排序**  
A. **冒泡排序**:（熟悉不描述）两趟以后**最大（或最小）**的两个元素肯定**到位**了。A错。    
B. **选择排序**:首先在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，然后再从剩余未排序元素中继续寻找最小（大）元素，放到已排序序列的末尾。两趟以后**最大（或最小）**的两个元素肯定**到位**了。B错。  
C. **二路归并排序**：（熟悉不描述）两趟以后会形成最长长度为**4**的**有序段**。C错。  
D. **插入排序**：![Insert Sorting](http://ww2.sinaimg.cn/large/9e2d8c2djw1eqel0075u0g208c02ygmu.gif)  

7\. 程序输出的结果是（）。**32位编译器输出40,64位编译器输出48**  
答：编译器的对齐规则的知识点。分清**数据类型自身对齐值**、**结构体（类）自身对齐值**、**指定对齐值**和**有效对齐值**：  
**数据类型自身对齐值**：数据类型自身所占容量。注意64位系统指针为8字节，32位系统指针为4字节。  
**结构体（类）自身对齐值**：其成员中自身对齐值**最大**的值。  
**指定对齐值**：#pragma pack(value)来指定的对齐值,一定是2的整数幂。  
**有效对齐值**：**仅在指定对齐值生效时才生效**。有效对齐值=**自身对齐值**和**指定对齐值**中**最小**的那个。  
本题中由于只有一句单飞的#pragma pack(pop)，因此可以它是无效的，本题无指定对齐值，结构体自身对齐值为8。
<table>
	<tr><th>地址</th>	<th>32位 #pragma pack(4)</th> 	<th></th><th>32位</th> 		  	<th></th><th>64位</th>			<th>地址</th></tr>
	<tr><td>0</td>   	<td>char a (1 Byte)</td>	<td></td><td>char a (1 Byte)</td> 	<td></td><td>char a (1 Byte)</td>	<td>3</td></tr>
	<tr><td>4</td>   	<td>int b</td>			<td></td><td>int b</td>	  		<td></td><td>int b</td>			<td>7</td></tr>
	<tr><td>8</td>   	<td>float c</td>		<td></td><td>float c</td>	  	<td></td><td>float c</td>		<td>11</td></tr>
	<tr><td>12</td>	 	<td>double d</td>		<td></td><td>留作对齐</td>	  	<td></td><td>留作对齐</td>		<td>15</td></tr>
	<tr><td>16</td>  	<td>double d</td>		<td></td><td>double d</td>	  	<td></td><td>double d</td>		<td>19</td></tr>
	<tr><td>20</td>  	<td>int * pa</td>		<td></td><td>double d</td>	  	<td></td><td>double d</td>		<td>23</td></tr>
	<tr><td>24</td>  	<td>char * pc</td>		<td></td><td>int * pa</td>	  	<td></td><td>int * pa</td>		<td>27</td></tr>
	<tr><td>28</td>  	<td>short e (2 Byte)</td>	<td></td><td>char * pc</td>	  	<td></td><td>int * pa</td>		<td>31</td></tr>
	<tr><td>32</td>  	<td></td>			<td></td><td>short e (2 Byte)</td>	<td></td><td>char * pc</td>		<td>35</td></tr>
	<tr><td>36</td>  	<td></td>			<td></td><td>留作对齐</td>	  	<td></td><td>char * pc</td>		<td>39</td></tr>
	<tr><td>40</td>  	<td></td>			<td></td><td></td>		  	<td></td><td>short e (2 Byte)</td>	<td>43</td></tr>
	<tr><td>44</td>  	<td></td>			<td></td><td></td>		  	<td></td><td>留作对齐</td>		<td>47</td></tr>
<table>

8\. 用二分法查找一个长度为20的，排好序的线性表，查找不成功时，最多需要比较多少次（）**A. 5次**  
答：**二分法查找**基础知识，**最少查找1次**，**最多查找⌊log(n)⌋+1次**。⌊log(20)⌋+1=5。  

9\. 应用层DNS协议主要用于实现（）网络服务功能。**C. 网络设备名字到IP地址的映射**  
答：网络原理基础知识，DNS协议用于从域名->ip地址的映射。

10\. 在MVC模式中，进行业务流程/状态处理以及业务规则制定的是（）。**A. Model**  
答：**MVC软件架构模式**基础知识，区分**模型**、**视图**、**控制器**：  
**模型**：用于封装与应用程序的业务逻辑相关的数据以及对数据的处理方法。  
**视图**：能够实现数据有目的的显示（理论上，这不是必需的）。  
**控制器**：起到不同层面间的组织作用，用于控制应用程序的流程。  
与业务流程相关的操作应该是由Model完成。  

11\. 下面程序的输出结果是（）。**14302012**  
答：**C++菱形继承（虚继承）**的知识点。菱形继承执行三部曲：  
1. 构造虚基类。  
2. 按照派生类继承顺序构造派生类，其对虚基类的构造函数的调用被忽略。  
3. 按照派生类的声明顺序调用对象**所属派生类的虚基类的构造函数**、**所属派生类的构造函数**。  
C++标准规定，由**最派生类**直接初始化**虚基类**。因此，对间接继承了虚基类的类，也必须能直接访问其虚继承来的祖先类，也即应知道其虚继承来的祖先类的地址偏移值。  
本题，Base是Base1的虚基类，Base也是Base2的虚基类。实践三部曲：  
1. 构造虚基类，执行初始化列表中的Base(a)，输出1。  
2. Derived类先继承Base2，后继承Base1,因此先执行Base2(d)，再执行Base1(c)。输出43。  
3. 根据声明顺序，先执行Base2 mem2(b)，输出02。后执行Base1 mem1(a)，输出01。  
4. 对象和成员变量初始化全部完毕，执行构造函数函数体，输出2。  

12\. 关于递归，说法正确的是（）。**ABCD**  
答：递归的基础知识。注意：**大部分递归问题可以转化为迭代**。

13\. 在定义int a[3][4][2];以后，第10个元素是（）。**B. a[1][0][1]**    
答：由于4*2=8，所以第9个函数会导致后两位溢出，极为a[1][0][0]。因此第10个元素为a[1][0][1] 

14\. 对于移动平均算法，是计算某变量之前n个数值的算术平均，用哪些数据结构记录历史变量，性能可以达到最优？（）  
A. 数组  
B. 双向链表  
C. 单向链表  
D. 二叉树

15\. 以下这段代码的运行结果是（）。
```C++
char *a = "hello";
char *b = "tencent";
printf("%s %s %s", a,b);
```
A. 编译错误  
B. 输出hello tencent  
C. 运行结果不可预知  
D. 无法运行  

## 简答题
1\. 给定若干个DNA序列（只包含ACGT四个字母），定义逆序度等于DNA中逆序对的总数，例如DNA序列AGCAGT，其逆序对有GC，GA，CA，所以该DNA序列的逆序度为3。请在横线上将DNA的逆序度的计算函数补充完整，要求时间复杂度O(n)。
```C++
#include <stdio.h>
#include <string.h>
int calc_revseq(const char * pdna, unsigned int len){
	int sum = 0;
	int c[4] = {0};	//c[0]-c[3]分别代表字母ACGT计数器
	for(int i = 0; i < len; i++){
		switch(pdna[i]){
		case 'A':
			_________________________;
			_________________________;
			break;
		case 'C':
			_________________________;
			_________________________;
			break;
		case 'G':
			_________________________;
			_________________________;
			break;
		case 'T':
			_________________________;
			break;
		default:
			return -1;
		};
	}
	return sum;
}
int main(int argc, char* argv[]){
	char dna[] = "ACGGGCTACGTCAGTCAAGCTCTTAGCCCCGGTTAGAGCACGTA";
	printf("%d\n",calc_revseq(dna,strlen(dna)));
	return 0;
}
```
2\. 目前每年都有很多的儿童走失，我们的同事已经实现了一个函数库，输入两张照片，会反悔两个照片是否是同一个儿童，但这个函数需要耗费一定的CPU，请你基于这个函数，设计一个帮助父母寻找失踪儿童的系统：  
1) 热心网友们可以同时上传一批流浪儿童的照片；  
2) 系统能对接收到的所有的照片，将同一个儿童的照片归为一组；  
3) 系统在网友的一批照片上传完成后，尽可能快的反悔本次上传中每个照片所属的组；  
A\. 假设仅使用一台机器，为了尽快缩短单个请求的时间，请尽可能详细写出你的数据结构，系统架构，处理流程，设计的思路。  
B\. 假设机器使用的数量不限，为了尽快缩短单个请求的时间，你将从哪些方面进行优化？

3\. 在iOS开发中，下述描述是否正确？一个对象被autoRelease后，这个对象的内存在退出当前调用的函数栈之后就被回收。请讲明原因。
